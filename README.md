# BD_Vacansey
Программа работы с вакансиями с продключением БД 

Соединение с Базой Данных.
Выполняет API-запрос и получает данные о работодателе и его вакансии 
Содержит методы для записи данных в таблицы
Класс методов работы с БД с выводом в JSON-файлы


## Структура проекта

### модуль bd_vacansey
Модуль пользовательской оболочки для работы с программой
### модуль src
Классы работы  с данными
### каталог data
Каталог хранения данных пользователя
### файл config.py
[Дополнительные настройки](#config) программы и API запросов 
### файл .env
Приватные настройки доступа к БД 

## Содержание

* [class DBConnect()](#DBConnect) db_connect.py
* [class DBInsert(DBConnect)](#DBInsert)  db_insert.py
* [class DBManager(DBConnect)](#DBManager)  db_manager.py
* [class GetAPI](#GetAPI)   get_api.py 
* [class ListData](#ListData)  list_data.py
  

# DBConnect
Соединение с Базой Данных, если нет БД, то создадим
Проверяем есть ли таблицы в БД, если нет - создаем
создается таблица industries
создается таблица company
создается таблица vacancies

##  connect
#### staticmethod
Устанавливает соединение с БД

## select_ 
#### staticmethod
Соединяется с БД и отправляет SQL запрос.
Возвращает список строк или пустой список
Записывает статус ответа в DBConnect.status

## drop_all
удаляет полностью БД

# DBInsert
#### наследник DBConnect
Подключается к БД
Содержит методы для записи данных в таблицы"

## industries_insert
Заполнение БД industries

## company_insert
Заполнение БД company"""

## vacancies_insert
Заполнение БД vacancies"""

##  remove_db
удаляет данные из таблиц. Вход список с литерами таблиц: ['v', 'c', 'i']:
        v - удалить данные в таблице vacancies;
        c - удалить company;
        i - удалить industries;
 
# DBManager
#### наследник DBConnect
Класс методов работы с БД

## get_companies_and_vacancies_count
Получает список всех компаний и количество вакансий у каждой компании.

## get_all_vacancies
Получает список всех вакансий с указанием названия компании,
вакансии и зарплаты и ссылки на вакансию. 
hh.ru/vacancy/112968986

## get_avg_salary
Получает среднюю зарплату по вакансиям.

## get_vacancies_with_higher_salary
Получает список всех вакансий, у которых зарплата выше средней
по всем вакансиям.

## get_vacancies_with_keyword
Получает список всех вакансий, в названии которых 
содержатся переданные в метод слова, например python.

## error_handling
#### staticmethod
Выводит сообщение об ошибке при статусе отличном от 'Ok' 
или предупреждение при возвращении пустого ответа

# FileJSON
Класс матодов сохранения словарей в json-файл

## save
Добавляет вакансии в файл 

## dict_for_json
Преобазовывает список в словарь для JSON-а
принимает словарь данных и список индексов для словаря json


# GetAPI
Выполняет API-запрос и получает данные о работодателе и его вакансии 


## company
Возвращает словарь с данными по компании
отправка API - запроса по компании 3 попытки

## vacancies
 Возвращает список словарей с вакансиями
список содержит словари по 100 вакансий

## status
Возвращает статус API-запроса. '200' - всё хорошо


# Industries
Класс определения id отрасли промышленности

## industries
#### staticmethod
Рекурсивный метод для парсинга файла отрасли промышленности

## load
загружает отрасли промышленности



# ListData
Подготавливает  список для записи в БД.
Выбирает из json только те поля, что будут занесены в БД
и список их вакансии

## company
#### staticmethod
Подготавливает список кампаний для записи в БД. Вывести список кампаний, где только те поля, что будут занесены в БД"""
            

## vacancy
#### staticmethod
Подготавливает список вакансии для записи в БД.
Выбирает из json только те поля, что будут занесены в БД вакансии
Несуществующие адреса заменяет пробелами
неуказанные запрлаты заменяет 0


## color
Делает выводимый текст цветным
ввод: цвет: str, текст: str
COLOR = True


# config